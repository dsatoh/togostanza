let main = null;

function Stanza(_main) {
  main = _main;
}

{{script}}

if (!main) {
  throw new Error('Stanza() is not called');
}

import { defineStanzaElement } from '~togostanza/stanza-element';

const metadata = {{to-json metadata}};
const outer    = {{to-json outer}};

const templates = [
  {{#each templates as |template|}}
    [{{to-json template.name}}, {{template.spec}}],
  {{/each}}
];

defineStanzaElement(main, {metadata, templates, outer});
