let main = null;

function Stanza(_main) {
  main = _main;
}

{{script}}

if (!main) {
  throw new Error('Stanza() is not called');
}

import { defineStanzaElement } from '~togostanza/stanza';

const metadata = {{metadataJSON}};
const outer    = {{outerJSON}};

const templates = {
  {{#each templates as |template|}}
    "{{template.name}}": {{template.spec}},
  {{/each}}
};

defineStanzaElement(main, {metadata, templates, outer});
